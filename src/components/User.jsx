"use client";

import React, { useEffect, useState } from "react";
import AvatarBorder from "././svgs/AvatarBorder";
import Image from "next/image";
import { useUser } from "./context/UserContext";
import Connector from "../components/svgs/Connector";
import Cookies from "js-cookie";

const User = ({ data }) => {
  const { user, setUser } = useUser();
  const [avatar, setAvatar] = useState("");

  useEffect(() => {
    setUser(data);
  }, [data]);
  useEffect(() => {
    const avatarIndex = Cookies.get("index");
    setAvatar(avatarIndex);
  }, []);

  return (
    <div className="absolute top-[1.2vw] left-[4%] flex gap-[5vw] sm:gap-[1vw]">
      <div className="user">
        <div className="avatar w-[8vw] h-[8vw] sm:w-[4vw] sm:h-[4vw] rounded-full relative flex items-center justify-center flex-col">
          <AvatarBorder className=" w-full h-full  absolute top-0 left-0 z-[1]" />
          <div className="relative w-[90%] h-[90%] ">
            <Image
              src={`/avatar/avatar${avatar}.png`}
              alt={data?.username}
              fill
              className="object-cover"
            />
          </div>
          <Connector
            name={data?.username}
            className="sm:w-[10vw] w-[12vw] h-auto absolute flex flex-col items-center justify-center -bottom-[5.3vw] sm:-bottom-[68%] left-1/2 transform -translate-x-1/2 z-[2]"
          />
        </div>
      </div>
      <div className="relative p-[0.1vw] h-fit rounded-[2vw] bg-gradient-to-b from-[#184260] to-[#666666] flex items-center justify-center">
        <div className="p-[0.15vw] h-fit rounded-[2vw] bg-[#00000091] flex items-center justify-center">
          <div className=" flex items-center bg-[#00000091] border-2 border-black h-fit rounded-[10vw] sm:rounded-[2vw] space-x-[7vw] pr-[1vw] sm:space-x-[3vw] sm:pr-4 ">
            <div className="absolute coin sm:w-[3vw] w-[7vw] h-[7vw] sm:h-[3vw] left-[-0.5vw] ">
              <svg
                width="229"
                height="229"
                viewBox="0 0 229 229"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                className="h-full w-full"
              >
                <g clipPath="url(#clip0_1030_10484)">
                  <path
                    d="M114.244 214.607C168.848 214.607 213.114 170.193 213.114 115.405C213.114 60.6166 168.848 16.2021 114.244 16.2021C59.6386 16.2021 15.3726 60.6166 15.3726 115.405C15.3726 170.193 59.6386 214.607 114.244 214.607Z"
                    fill="black"
                  />
                  <path
                    d="M114.243 192.777C159.027 192.777 195.331 156.35 195.331 111.416C195.331 66.482 159.027 30.0557 114.243 30.0557C69.4592 30.0557 33.1548 66.482 33.1548 111.416C33.1548 156.35 69.4592 192.777 114.243 192.777Z"
                    fill="url(#paint0_linear_1030_10484)"
                  />
                  <path
                    d="M114.5 0C51.2641 0 0 51.2641 0 114.5C0 177.736 51.2641 229 114.5 229C177.736 229 229 177.736 229 114.5C229 51.2641 177.736 0 114.5 0ZM114.5 205.589C63.4158 205.589 22.0056 164.176 22.0056 113.092C22.0056 62.0074 63.4158 20.5972 114.5 20.5972C165.584 20.5972 206.994 62.0099 206.994 113.086C206.994 164.163 165.584 205.589 114.5 205.589Z"
                    fill="url(#paint1_linear_1030_10484)"
                  />
                  <path
                    d="M153.9 222.04C148.549 223.813 142.946 225.334 137.29 226.73C142.937 225.59 148.49 224.022 153.9 222.04Z"
                    fill="white"
                  />
                  <path
                    d="M96.2061 1.54164L96.697 22.4472C108.909 20.0705 121.472 20.1614 133.648 22.7145L134.141 1.68043C121.411 -0.512552 108.404 -0.559463 95.6587 1.54164C95.8412 1.54164 96.0237 1.54164 96.2061 1.54164Z"
                    fill="white"
                  />
                  <path
                    d="M38.4751 60.5755L38.2387 60.9636C44.7286 51.4859 52.9203 43.2942 62.3981 36.8043L47.2522 21.8203C38.1091 28.467 29.9947 36.4239 23.1699 45.4348L38.4751 60.5755Z"
                    fill="white"
                  />
                  <path
                    d="M206.869 113.087C206.871 118.69 206.366 124.281 205.36 129.793L227.962 129.973C229.451 118.93 229.338 107.73 227.625 96.7202H205.422C206.386 102.122 206.87 107.599 206.869 113.087Z"
                    fill="white"
                  />
                  <path
                    d="M167.668 37.1001C163.933 34.484 159.945 32.2505 155.763 30.4331C169.603 37.3652 181.488 47.6496 190.337 60.3496L205.573 45.2757C205.76 45.4582 205.945 45.6484 206.133 45.836C199.441 36.9191 191.489 29.0217 182.526 22.3911L167.668 37.1001Z"
                    fill="white"
                  />
                  <path
                    d="M190.034 166.268C183.986 174.842 176.529 182.329 167.98 188.412L183.614 205.162C182.789 206.046 181.918 206.894 181.011 207.712C191.043 200.539 199.859 191.801 207.121 181.833L190.034 166.268Z"
                    fill="white"
                  />
                  <path
                    d="M130.406 204.093C119.642 205.956 108.634 205.914 97.8837 203.969L97.4082 227.73C108.505 229.387 119.783 229.423 130.889 227.836L130.406 204.093Z"
                    fill="white"
                  />
                  <path
                    d="M61.5785 188.806C52.9185 182.743 45.3566 175.247 39.2183 166.641L22.1396 182.2C28.7571 191.209 36.6505 199.206 45.5717 205.941L61.5785 188.806Z"
                    fill="white"
                  />
                  <path
                    d="M23.6452 129.792C21.6546 118.858 21.6337 107.656 23.5835 96.7144H1.37487C-0.341451 107.727 -0.458308 118.929 1.02791 129.975L23.6452 129.792Z"
                    fill="white"
                  />
                  <path
                    d="M114.628 25.9585C66.2243 25.9585 26.9858 65.1969 26.9858 113.6C26.9858 162.004 66.2243 201.242 114.628 201.242C163.031 201.242 202.27 162.004 202.27 113.6C202.27 65.1969 163.031 25.9585 114.628 25.9585ZM114.628 186.336C73.3924 186.336 39.9651 152.908 39.9651 111.673C39.9651 70.4374 73.3924 37.0101 114.628 37.0101C155.863 37.0101 189.291 70.4374 189.291 111.673C189.291 152.908 155.863 186.336 114.628 186.336Z"
                    fill="#4B32B1"
                  />
                  <path
                    d="M39.9651 111.415C39.9665 107.933 40.2087 104.455 40.6899 101.006H27.8545C26.759 108.76 26.6994 116.625 27.6772 124.395H41.0908C40.341 120.109 39.9643 115.766 39.9651 111.415Z"
                    fill="white"
                  />
                  <path
                    d="M135.857 183.013C128.965 185.051 121.815 186.084 114.628 186.079C114.176 186.079 113.723 186.079 113.271 186.061L114.556 200.986H114.628C123.59 200.993 132.5 199.625 141.047 196.93L135.857 183.013Z"
                    fill="white"
                  />
                  <path
                    d="M154.885 48.5239C161.76 52.9384 167.869 58.4448 172.971 64.8263L180.167 55.1497C174.753 49.0551 168.519 43.7416 161.644 39.3613L154.885 48.5239Z"
                    fill="white"
                  />
                  <path
                    d="M201.641 123.86L188.739 120.519C187.719 128.917 185.271 137.079 181.501 144.653L194.712 148.996C198.271 141.013 200.607 132.539 201.641 123.86Z"
                    fill="white"
                  />
                  <path
                    d="M182.768 80.8547C185.835 87.6851 187.85 94.9407 188.744 102.375L201.163 99.3983C199.846 91.1634 197.354 83.1605 193.761 75.6348L182.768 80.8547Z"
                    fill="white"
                  />
                  <path
                    d="M69.9214 51.6136C77.3698 46.0331 85.7992 41.8999 94.7721 39.4285L90.3515 29.1094C80.7441 31.8777 71.6837 36.2757 63.5654 42.1117L69.9214 51.6136Z"
                    fill="white"
                  />
                  <path
                    d="M95.0365 183.475C87.3326 181.384 80.0159 178.065 73.3676 173.647L68.145 187.649C74.6966 191.758 81.7656 194.978 89.1662 197.223L95.0365 183.475Z"
                    fill="white"
                  />
                  <path
                    d="M114.834 25.7017L113.901 36.7533C114.142 36.7533 114.384 36.7533 114.628 36.7533C122.268 36.7477 129.864 37.9144 137.15 40.2127L138.785 29.0763C130.996 26.849 122.935 25.7133 114.834 25.7017Z"
                    fill="white"
                  />
                  <path
                    d="M171.172 160.479C166.104 166.287 160.173 171.28 153.587 175.283L164.746 185.155L164.919 185.31C171.138 180.976 176.773 175.858 181.684 170.084L171.786 159.76C171.573 160.001 171.367 160.24 171.172 160.479Z"
                    fill="white"
                  />
                  <path
                    d="M59.4993 161.763C54.2345 156.006 49.9036 149.46 46.6639 142.363L34.4814 148.845C38.1007 156.99 42.9402 164.535 48.8331 171.221L59.4993 161.763Z"
                    fill="white"
                  />
                  <path
                    d="M45.8926 82.2168C48.5603 75.9516 52.0729 70.0809 56.3326 64.7681L45.7795 59.1138C41.5569 64.4678 37.973 70.296 35.1006 76.4802L45.8926 82.2168Z"
                    fill="white"
                  />
                  <path
                    d="M143.671 92.2688L151.639 84.8154C153.952 88.0795 160.814 98.6813 160.249 113.73C159.714 127.94 152.87 137.609 150.354 140.845L139.045 127.151L117.877 156.792V59.1653C86.1077 62.2495 63.3902 87.4652 63.822 113.601C64.1355 132.474 76.4954 150.236 95.0287 159.761L93.466 172.534C67.8365 160.997 50.7039 137.611 50.7476 113.601C50.8068 80.0349 84.4166 47.1448 128.764 48.8333L128.705 120.515L139.045 108.253L147.144 118.87C148.989 114.529 149.64 109.774 149.03 105.096C148.419 100.419 146.569 95.9905 143.671 92.2688Z"
                    fill="url(#paint2_linear_1030_10484)"
                  />
                  <path
                    d="M86.3565 131.848L78.1321 139.045C75.8189 135.904 69.0235 125.829 69.1905 111.287C69.3627 96.3599 76.775 86.2566 79.1678 83.2444L89.9547 96.6374L111.287 67.3378L109.943 164.469C142.07 164.289 166.758 140.037 167.514 113.6C168.087 93.764 155.131 74.38 134.937 64.8267V52.0942C161.87 63.5725 179.195 88.5903 178.247 113.6C176.962 147.169 142.859 178.211 100.23 174.77L100.289 102.374L90.9828 115.4L81.0029 102.374C79.2293 105.54 78.2181 109.076 78.0498 112.701C77.618 123.388 85.0175 130.589 86.3565 131.848Z"
                    fill="url(#paint3_linear_1030_10484)"
                  />
                </g>
                <defs>
                  <linearGradient
                    id="paint0_linear_1030_10484"
                    x1="113.094"
                    y1="192.769"
                    x2="115.392"
                    y2="30.0634"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stopColor="#252D3B" />
                    <stop offset="1" stopColor="#3C4E71" />
                  </linearGradient>
                  <linearGradient
                    id="paint1_linear_1030_10484"
                    x1="112.925"
                    y1="225.908"
                    x2="116.06"
                    y2="4.0557"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stopColor="#4B32B1" />
                    <stop offset="0.49" stopColor="#4B32B1" />
                    <stop offset="1" stopColor="#7AB7FB" />
                  </linearGradient>
                  <linearGradient
                    id="paint2_linear_1030_10484"
                    x1="104.667"
                    y1="172.694"
                    x2="106.422"
                    y2="48.4941"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stopColor="#ED9506" />
                    <stop offset="1" stopColor="#FFE707" />
                  </linearGradient>
                  <linearGradient
                    id="paint3_linear_1030_10484"
                    x1="123.739"
                    y1="173.809"
                    x2="123.739"
                    y2="49.812"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stopColor="#ED9506" />
                    <stop offset="1" stopColor="#FFE707" />
                  </linearGradient>
                  <clipPath id="clip0_1030_10484">
                    <rect width="229" height="229" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </div>
            <span className="text-[4vw] sm:text-[1.5vw] ml-[2.5vw] bg-gradient-to-b from-[#D4DA8F] via-[#BC7300] via-[50.91%] to-[#FFECB6] text-transparent bg-clip-text font-[400]">
              {parseFloat((data?.credits ?? 0).toFixed(1))}
            </span>
          </div>
        </div>
      </div>
    </div>
  );
};

export default User;
